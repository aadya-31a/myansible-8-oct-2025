--- 
 - hosts: all 
   become: yes
   gather_facts: yes  
   tasks:
    - name: install webserver on ubuntu node
      apt: 
        name: apache2 
        state: present
      when: ansible_os_family =="Debian" 
   
    - name: start webserver on nodes
      service:
        name: apache2
        state: started
      when: ansible_os_family =="Debian" 

    - name: install webserver on Redhat nodes
      dnf:
        name: httpd
        state: present
      when: ansible_os_family =="Redhat"

    - name: start webserver on Redhat nodes
      service:
        name: httpd
        state: started
      when: ansible_os_family =="Redhat"